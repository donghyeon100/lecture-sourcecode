<!DOCTYPE html>
<html lang="ko" xmlns:th="http://thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>게시판 이름</title>

	<th:block th:replace="~{common/common}"></th:block>

	<link rel="stylesheet" href="/css/board/boardList-style.css">

	<style>
		/* 전체 레이아웃 */
		.board-list {
			max-width: 1200px;
			margin: 0 auto;
			padding: 20px;
		}

		.board-name {
			text-align: center;
			margin-bottom: 30px;
		}

		/* 카드 리스트 스타일 */
		.list-wrapper {
			margin-bottom: 30px;
		}

		.card-list {
			display: grid;
			grid-template-columns: repeat(3, 1fr);
			gap: 20px;
		}

		.card {
			border: 1px solid #ddd;
			border-radius: 8px;
			overflow: hidden;
			box-shadow: 0 2px 4px rgba(0,0,0,0.1);
			transition: transform 0.3s ease;
		}

		.card:hover {
			transform: translateY(-5px);
		}

		/* 썸네일 이미지 */
		.thumbnail {
			height: 200px;
			overflow: hidden;
		}

		.thumbnail img {
			width: 100%;
			height: 100%;
			object-fit: cover;
		}

		/* 카드 내용 */
		.card-content {
			padding: 15px;
		}

		.title {
			margin: 0 0 10px 0;
			font-size: 18px;
		}

		.title a {
			color: #333;
			text-decoration: none;
		}

		.comment-count {
			color: #666;
			font-size: 0.9em;
		}

		.author, .date {
			margin: 5px 0;
			color: #666;
			font-size: 0.9em;
		}

		.stats {
			display: flex;
			justify-content: space-between;
			margin-top: 10px;
			font-size: 0.8em;
			color: #888;
		}

		/* 버튼 영역 */
		.btn-area {
			text-align: right;
			margin: 20px 0;
		}

		#insertBtn {
			padding: 10px 20px;
			background-color: #007bff;
			color: white;
			border: none;
			border-radius: 5px;
			cursor: pointer;
		}

		/* 페이지네이션 */
		.pagination-area {
			display: flex;
			justify-content: center;
			margin-top: 30px;
		}

		.pagination {
			list-style: none;
			display: flex;
			padding: 0;
		}

		.pagination li {
			margin: 0 5px;
		}

		.pagination a {
			text-decoration: none;
			color: #333;
			padding: 5px 10px;
			border: 1px solid #ddd;
			border-radius: 3px;
		}

		.pagination a.current {
			background-color: #007bff;
			color: white;
		}

		/* 검색 폼 */
		#boardSearch {
			display: flex;
			justify-content: center;
			margin-top: 30px;
		}

		#searchKey {
			padding: 5px;
			margin-right: 10px;
		}

		#searchQuery {
			padding: 5px;
			width: 300px;
			margin-right: 10px;
		}

		#boardSearch button {
			padding: 5px 15px;
			background-color: #007bff;
			color: white;
			border: none;
			border-radius: 3px;
			cursor: pointer;
		}

		/* 반응형 디자인 */
		@media (max-width: 1024px) {
			.card-list {
				grid-template-columns: repeat(2, 1fr);
			}
		}

		@media (max-width: 768px) {
			.card-list {
				grid-template-columns: 1fr;
			}
		}
	</style>
</head>

<body>
	<main>

		<th:block th:replace="~{common/header}"></th:block>


		<section class="board-list">
			
			<!-- 인터셉터 이용 방법 -->
			<h1 class="board-name" th:text="${boardName}">게시판 이름</h1>


			<!-- apllication, request scope 값 이용 방법 -->
			<!-- <th:block th:each="boardType : ${application.boardTypeList}">
				
				<h1 class="board-name" 
						th:if="${boardType.boardCode} == ${boardCode}"
						th:text="${boardType.boardName}">
					게시판 이름
				</h1>

			</th:block> -->



			<!-- 검색 구현 후 사용 -->
			<!-- <h3 style="margin:30px">OOO 검색 결과</h3> -->

			<div class="list-wrapper">
				<div class="card-list">
					<!-- 게시글이 존재하지 않을 때 -->
					<th:block th:if="${#lists.isEmpty(boardList)}">
						<p class="no-content">게시글이 존재하지 않습니다.</p>
					</th:block>

					<!-- 게시글이 존재할 때 -->
					<th:block th:unless="${#lists.isEmpty(boardList)}">
						<div class="card-row" th:each="row : ${#numbers.sequence(0, boardList.size() - 1, 3)}">
							<div class="card" th:each="i : ${#numbers.sequence(row, row + 2)}" th:if="${i < boardList.size()}">
								<th:block th:with="board=${boardList[i]}">
									<div class="thumbnail">
										<!-- 썸네일 이미지  -->
										<img th:src="${board.thumbnail}" alt="썸네일">
									</div>
									<div class="card-content">
										<h3 class="title">
											<!-- 검색 X -->
											<a th:unless="${param.key}"
												th:href="@{/board/{boardCode}/{boardNo} (boardCode=${boardCode}, boardNo=${board.boardNo}, cp=${pagination.currentPage})}" 
												th:text="${board.boardTitle}">게시글 제목</a>
											<!-- 검색 O -->
											<a th:if="${param.key}"
												th:href="@{/board/{boardCode}/{boardNo} (boardCode=${boardCode}, boardNo=${board.boardNo}, cp=${pagination.currentPage}, key=${param.key}, query=${param.query} )}" 
												th:text="${board.boardTitle}">게시글 제목</a>
											<span class="comment-count" th:text="|[${board.commentCount}]|">댓글 수</span>
										</h3>
										<p class="author" th:text="${board.memberNickname}">작성자</p>
										<p class="date" th:text="${board.boardWriteDate}">작성일</p>
										<div class="stats">
											<span class="views" th:text="|조회수: ${board.readCount}|">조회수: 0</span>
											<span class="likes" th:text="|좋아요: ${board.likeCount}|">좋아요: 0</span>
										</div>
									</div>
								</th:block>
							</div>
						</div>
					</th:block>
				</div>
			</div>



			<div class="btn-area">
				<!-- 로그인 상태일 때만 글쓰기 버튼 노출 -->
				<button id="insertBtn" th:if="${session.loginMember}">글쓰기</button>
			</div>


			<!-- ============================================================================================================== -->

			<!-- 게시글이 있을 때만 페이지네이션이 보이게 할 예정 -->
			<div class="pagination-area">

				<!-- 일반 목록 조회 ( 검색 X ) -->
				<ul class="pagination" th:unless="${param.key}" th:object="${pagination}">

					<!-- 첫 페이지로 이동 -->
					<li><a th:href="@{/board/{boardCode} (boardCode=${boardCode}, cp=1)}">&lt;&lt;</a></li>

					<!-- 이전 목록 마지막 번호로 이동 -->
					<li><a th:href="@{/board/{boardCode} (boardCode=${boardCode}, cp=*{prevPage})}">&lt;</a></li>

					<!-- 특정 페이지로 이동 -->
					
					<!-- <th:block th:each="i : ${#numbers.sequence(pagination.startPage, pagination.endPage)}"> -->
					<th:block th:each="i : *{#numbers.sequence(startPage, endPage)}">
						
						<!-- 현재 보고있는 페이지 -->
						<!-- <li th:if="${i == pagination.currentPage}"> -->
						<li th:if="${i} == *{currentPage}">
							<a class="current" th:text="${i}">현재 페이지</a>
						</li>
	
						<!-- 보고있지 않은 페이지 -->
						<!-- <li th:unless="${i == pagination.currentPage}">  -->
						<li th:unless="${i} == *{currentPage}">
							<a th:href="@{/board/{boardCode} (boardCode=${boardCode}, cp=${i})}" 
								 th:text="${i}">이동할 페이지</a> 
						</li>

					</th:block>
					


					<!-- 다음 목록 시작 번호로 이동 -->
					<li><a th:href="@{/board/{boardCode} (boardCode=${boardCode}, cp=*{nextPage})}">&gt;</a></li>

					<!-- 끝 페이지로 이동 -->
					<li><a th:href="@{/board/{boardCode} (boardCode=${boardCode}, cp=*{maxPage})}">&gt;&gt;</a></li>
				</ul>



				<!-- ------------- 검색인 경우 ------------- -->
				<ul class="pagination" th:if="${param.key}" th:object="${pagination}">

					<!-- 첫 페이지로 이동 -->
					<li><a th:href="@{/board/{boardCode} (boardCode=${boardCode}, cp=1, key=${param.key}, query=${param.query})}">&lt;&lt;</a></li>

					<!-- 이전 목록 마지막 번호로 이동 -->
					<li><a th:href="@{/board/{boardCode} (boardCode=${boardCode}, cp=*{prevPage}, key=${param.key}, query=${param.query})}">&lt;</a></li>



					<!-- 특정 페이지로 이동 -->
					<th:block  th:if="*{startPage lt endPage}" th:each="i : *{#numbers.sequence(startPage, endPage)}">
						
						<!-- 현재 보고있는 페이지 -->
						<!-- <li th:if="${i == pagination.currentPage}"> -->
						<li th:if="${i} == *{currentPage}">
							<a class="current" th:text="${i}">현재 페이지</a>
						</li>
	
						<!-- 보고있지 않은 페이지 -->
						<!-- <li th:unless="${i == pagination.currentPage}">  -->
						<li th:unless="${i} == *{currentPage}">
							<a th:href="@{/board/{boardCode} (boardCode=${boardCode}, cp=${i}, key=${param.key}, query=${param.query})}" 
								 th:text="${i}">이동할 페이지</a> 
						</li>
					</th:block>

					<!-- 일치하는 게시글이 없을 경우 -->
					<th:block th:unless="*{startPage lt endPage}">
						<li>
							<a class="current">1</a>
						</li>
					</th:block>
					


					<!-- 다음 목록 시작 번호로 이동 -->
					<li><a th:href="@{/board/{boardCode} (boardCode=${boardCode}, cp=*{nextPage}, key=${param.key}, query=${param.query})}">&gt;</a></li>

					<!-- 끝 페이지로 이동 -->
					<li><a th:href="@{/board/{boardCode} (boardCode=${boardCode}, cp=*{maxPage}, key=${param.key}, query=${param.query})}">&gt;&gt;</a></li>
				</ul>

			</div>



			<!-- 검색창 -->
			<form th:action="@{{boardCode}(boardCode=${boardCode})}" method="get" id="boardSearch">

				<select name="key" id="searchKey">
					<option value="t">제목</option>
					<option value="c">내용</option>
					<option value="tc">제목+내용</option>
					<option value="w">작성자</option>
				</select>

				<input type="text" name="query" id="searchQuery" placeholder="검색어를 입력해주세요.">

				<button>검색</button>
			</form>

		</section>
	</main>


	<th:block th:replace="~{common/footer}"></th:block>

	<script th:inline="javascript">
		const boardCode = /*[[${boardCode}]]*/ "게시판 코드 번호";
	</script>

	<script src="/js/board/boardList.js"></script>

</body>
</html>